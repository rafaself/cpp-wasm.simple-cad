:root {
  color-scheme: light dark;

  /* --- Typography Tokens --- */
  --text-title: 16px;
  --text-heading: 13px;
  --text-body: 12px;
  --text-body-strong: 12px;
  --text-label: 10px;
  --text-caption: 10px;
  --text-mono: 11px;

  /* --- Spacing (CAD-Optimized) --- */
  --space-0: 0px;
  --space-0_5: 2px;
  --space-0_75: 3px;
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;
  --space-8: 32px;
  --space-10: 40px;
  --space-12: 48px;
  --space-16: 64px;

  /* --- Radii --- */
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-xl: 16px;
  --radius-full: 9999px;

  /* --- Z-Index (Two-Scale Model) --- */
  /* Canvas Domain */
  --z-canvas-base: 0;
  --z-canvas-overlay: 10;
  --z-canvas-hud: 20;
  /* Portal Domain */
  --z-modal: 2000;
  --z-dropdown: 2100;
  --z-tooltip: 2200;
  --z-toast: 3000;

  /* --- Elevation / Shadows --- */
  --shadow-0: none;
  --shadow-1: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-2: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --shadow-3: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  --shadow-4: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
  --shadow-focus: 0 0 0 2px hsl(var(--color-focus) / 0.35);

  /* --- Motion --- */
  --duration-fast: 150ms;
  --duration-normal: 300ms;
  --easing-default: cubic-bezier(0.4, 0, 0.2, 1);

  /* --- Component Sizing --- */
  --height-input-sm: 24px;
  --height-input-md: 32px;
  --height-button-sm: 24px;
  --height-button-md: 32px;
  --icon-xs: 12px;
  --icon-sm: 16px;
  --icon-md: 20px;
  --icon-lg: 24px;
  --icon-xl: 32px;

  /* --- Ribbon Sizing + Layout --- */
  --ribbon-group-body-height: 66px; /* 28px rows + 4px gap + 6px padding */
  --ribbon-group-label-height: 18px; /* Label area */
  --ribbon-height: calc(var(--ribbon-group-body-height) + var(--ribbon-group-label-height));
  --ribbon-control-height-md: 28px;
  --ribbon-control-height-sm: var(--height-button-sm);
  --ribbon-control-height-lg: 60px;
  --ribbon-icon-btn-size-md: calc(
    var(--ribbon-control-height-md) - (var(--ribbon-cluster-padding) * 2)
  );
  --ribbon-icon-btn-size-sm: var(--ribbon-control-height-sm);
  --ribbon-item-height: var(--ribbon-control-height-md);
  --ribbon-group-px: var(--space-3);
  --ribbon-group-gap-x: var(--space-1);
  --ribbon-group-gap-y: var(--space-1);
  --ribbon-label-font-size: var(--text-label);
  --ribbon-label-line-height: 18px;
  --ribbon-control-font-size: var(--text-body);
  --ribbon-control-line-height: 16px;
  --ribbon-control-radius: var(--radius-sm);
  --ribbon-cluster-padding: var(--space-0_5);
  --ribbon-cluster-gap: var(--space-0_5);
  --ribbon-swatch-size: var(--space-5);
  --ribbon-cluster-bg: hsl(var(--color-surface-2));
  --ribbon-cluster-border: hsl(var(--color-border));
  --ribbon-toggle-on-bg: hsl(var(--color-primary) / 0.16);
  --ribbon-toggle-on-border: hsl(var(--color-primary) / 0.45);
  --ribbon-toggle-on-text: hsl(var(--color-text));
  --ribbon-mode-bg: hsl(var(--color-primary));
  --ribbon-mode-text: hsl(var(--color-primary-contrast));
  --ribbon-hover-bg: hsl(var(--color-surface-2) / 0.7);
  --ribbon-divider-color: hsl(var(--color-border));
  --ribbon-divider-opacity: 0.5;
  --ribbon-control-bg: hsl(var(--color-surface-2));
  --ribbon-control-border-color: hsl(var(--color-border) / 0.6);
  --ribbon-control-focus: hsl(var(--color-focus) / 0.5);
  --ribbon-overflow-min-width: 220px;
  --ribbon-overflow-max-height: 320px;
  --ribbon-overflow-trigger-min-width: 64px;
  --ribbon-inline-menu-min-width: 180px;
  --ribbon-tooltip-min-width: 160px;
  
  /* --- Colors (Base definitions) --- */
   /* Canvas background is fixed regardless of theme (always dark) */
  --canvas-bg: #212830;
}

:root[data-theme='dark'] {
  /* Surfaces */
  --color-bg: 213 18% 16%; /* #212830 */
  --color-surface-1: 222 47% 11%; /* #0f172a */
  --color-surface-2: 217 33% 17%; /* #1e293b */
  --color-border: 215 25% 27%; /* #334155 */
  
  /* Text */
  --color-text: 210 20% 98%; /* #e2e8f0 */
  --color-text-muted: 215 16% 65%; /* #94a3b8 */
  --color-text-subtle: 215 16% 45%; 

  /* Actions */
  --color-primary: 221 83% 53%; /* #3b82f6 */
  --color-primary-hover: 221 83% 43%; /* #2563eb */
  --color-primary-contrast: 0 0% 100%;

  --color-secondary: 215 19% 35%; /* #475569 */
  --color-secondary-hover: 215 25% 27%; /* #334155 */

  /* Status */
  --color-success: 142 76% 36%; /* green-600 */
  --color-warning: 38 92% 50%; /* amber-500 */
  --color-error: 0 84% 60%; /* red-500 */
  --color-info: 199 89% 48%; /* sky-500 */
  --color-focus: 221 83% 53%; /* Match primary */

  /* Legacy Header Support */
  --color-header-bg: 220 39% 9%;
  --color-header-tab-active: 217 33% 17%;
}

:root[data-theme='light'] {
  /* Surfaces */
  --color-bg: 210 40% 98%; /* #f8fafc */
  --color-surface-1: 0 0% 100%; /* #ffffff */
  --color-surface-2: 210 40% 96%; /* #f1f5f9 */
  --color-border: 212 23% 84%; /* #cbd5e1 */

  /* Text */
  --color-text: 222 47% 11%; /* #0f172a */
  --color-text-muted: 215 16% 47%; /* #64748b */
  --color-text-subtle: 215 16% 70%; 

  /* Actions */
  --color-primary: 221 83% 53%;
  --color-primary-hover: 221 83% 43%;
  --color-primary-contrast: 0 0% 100%;

  --color-secondary: 210 40% 96%;
  --color-secondary-hover: 212 23% 84%;

  /* Status */
  --color-success: 142 71% 45%;
  --color-warning: 38 92% 50%;
  --color-error: 0 84% 60%;
  --color-info: 199 89% 48%;
  --color-focus: 221 83% 53%;

  /* Legacy Header Support */
  --color-header-bg: 210 40% 96%;
  --color-header-tab-active: 0 0% 100%;
}

.text-title {
  font-size: var(--text-title);
}

.text-heading {
  font-size: var(--text-heading);
}

.text-body {
  font-size: var(--text-body);
}

.text-body-strong {
  font-size: var(--text-body-strong);
}

.text-label {
  font-size: var(--text-label);
}

.text-caption {
  font-size: var(--text-caption);
}

.text-mono {
  font-size: var(--text-mono);
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New',
    monospace;
}
